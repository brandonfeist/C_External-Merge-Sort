A research on the sequential pattern similarity of time series 
Xun Lin1,3 Yong Zhou2  Yuan Xue1  
1School of economic information engineering, Southwestern University of Finance&Economics,  Chengdu.Sichuan 
610071 
2Huaxin college, Sichuan Radio and TV university, Chengdu.Sichuan 610073 
3College of computer science, Sichuan University,  Chengdu.Sichuan  610000 
Linx_t@swufe.edu.cn 
 
ABSTRACT? In general?  the distance measuring method 
could only measure the pattern similarities of the time series 
with the same length. Through introducing the concept of 
dynamic time warping distance, this work proposed a way to 
define the dynamic time warping distance of the sequential 
patterns and finally carry out simulation experiments based on 
the defining the similarities of meta patterns.. 
KEYWORDSs: time series?sequential pattern?similarity. 
I.  INTRODUCTION 
The time association rules are the important and valuable 
information implicitly contained in the time series. This 
information could contribute a lot to the decision making of 
the time series users. The measurement of the time series’ 
sequential pattern similarity is a vital step in extracting the 
time association rules from the time series. 
II. A GENERAL DESCRIPTION OF THE META PATTERN OF 
THE TIME SERIES 
Time series ),...,,( 21 nxxxX = ? use all local 
extreme points S ? },...,,{ 21 msss  to divide X into 1+m  
sub series? supposing that the dividing points don’ t 
include the two endpoints? as 1.1 below? 
 
???
???
?
=
],[),(
...........................
],[),(
],[),(
21
11
21
11
nm xsnm
ss
sx
ttxsl
ttssl
ttsxl
X
??
??
??
?1.1? 
Every sub series is fitting into a direct line using least 
square methods, the result is? 
iii btatL +=)(  ( 1,...,2,1 += mi  ) 
After getting the cross points of two segments, we can 
get 1+m  segments. Then we get the slope ia  and the time 
value of the cross point it  for each segment. A segment can 
be expressed as a pattern using its slope ia   and the time 
value it? ? ?irt ilt between its two endpoints? 
  ),( iii taM ?= ? 1,...,2,1 += mi ?   ?1.2? 
Then the pattern series for time series 
),...,,( 21 nxxxX =  is generated as ?
)},(),...,,(),,{( 112211 ++ ???= mmX tatataS   (1.3) 
Definition 1.1 the pattern expressed as formula (1.2) is 
time series X’ s meta pattern? the pattern denoted by 
formula (1.3) is the pattern series for time series X. 
Definition 1.2 the patter series for time series X 
is },...,,{ 21 mX MMMS = ? if S is a sub series 
composed by XS ’s neighboring meta patterns?then we 
have },...,,{ 1 liii MMMS ++= ?( i?1 ? mli ?+ )?
S  is called as the sequential pattern for . 
Definition 1.3 The pattern series for time series X is 
},...,,{ 21 mX MMMS = ? for every two sequential 
patterns XSSS ?21 , ? the similarity function is  
),( 21 SSSim ?for a specific given constant ?  if? 
??),( 21 SSSim ,then we can assert that meta patterns 
1S  and 2S is similar within the boundary ? . 
The similarity function ),( 21 SSSim  must satisfy the 
following conditions for random meta 
patterns 321 , andSSS  from pattern series XS ? 
(1)positive definite: 0),( 21 ?SSSim  ? 
(2)Symmetry: ),( 21 SSSim = ),( 12 SSSim  ? 
(3)Trigonometric inequality: 
),( 21 SSSim ? ),( 31 SSSim + ),( 32 SSSim  
III.  THE DYNAMIC TIME WARPING DISTANCE OF TIME 
SERIES 
Dynamic Time Warping(ATW) was initially applied in 
the fields of text data matching and visual pattern 
recognition .It has been already demonstrated by previous 
researches that the algorithms based on non-linear time 
warping technology could achieve high precision in both 
recognition and matching. Berndt and Clifford proposed that 
ATW can be introduced into the analysis of time series. 
Good performance has already been gained in primary 
researches[1][2][3]. 
2009 International Forum on Information Technology and Application
978-0-7695-3600-2/09 $25.00 © 2009 IEEE
DOI 10.1109/IFITA.2009.479
247
2009 International Foru  on Infor ation echnology and pplications
For time series ),...,,( 21 nxxxX =  and 
),...,,( 21 myyyY = ?we can define a discrete metrics? 
mnijaDM ×= )(  
2)( jiij yxa ?= , ija  could denote the extent of 
dissimilarity between data ix , jy . 
In distant metrics mnij
aDM ×= )( ?a set composed by 
the elements from neighboring metrics is defined as warping 
distance. To suppose that KwwwW ,...,, 21=  ?the kth  
element of W  is kijk aw )(= ? this path satisfies the 
following conditions? 
(1)Boundedness? 1},max{ ?+?? nmKnm  ? 
(2)Boundarieness? 111 aw =  ? nmK aw =  ? 
(3)Continuity?In the warping path, the two neighboring 
elements ijk
aw = ? ''1 jik
aw =
?  must satisfy 1
' ?? ii
? 1
' ?? jj ?which mean the elements in the warping 
path are mutually continuous? 
(4)Monotonicity ? in the warping path ? the two 
neighboring elements ijk
aw =
 ? ''1 jik
aw =
? , must 
satisfy 
'0 ii ?? ,
'0 jj ??  which means path  must pass 
through at least one points from  ),1( ji ? ? )1,1( ?? ji  
or to ensure the path is monotonous. 
 
 
 
The whole metric represents the distance metrics 
between two time series and each blank represents one 
element of the distance metrics. As illustrated by figure 1?
the path between 11a  and nma  is a warping path. In the 
distance metrics of these two time series ?there’re several 
warping paths from 11a  to nma  . 
However ? we can always find a warping 
path KwwwW ,...,, 21= , to minimize 
?
=
K
i
iw
1  This path  
KwwwW ,...,, 21=   is defined as the optimal warping 
path for the distant metrics [4][5][6]?we call this minimum 
value as the dynamic warping distance between time series 
X  and which is denoted as  ),( YXDdtw , then we have?
},...,,,min{),( 21
1
K
K
i
idtw wwwWwYXD == ?
=  
The dynamic warping distance two time series 
),( YXDdtw  has the following features? 
(1)When  nm = ?0? ),( YXDdtw ?0? 
(2)When  nm = , 
?
=
?=
n
i
iidtw yxYXD
1
2)(),(
 . 
We’ve only given the dynamic time warping distant but 
didn’t provide the way of solving it above. Exhaustive 
search algorithms are a possible way, but it turned out to be 
not practical when the pattern series is very long. The time 
cost is also extremely high since there might be many 
warping paths and they’re in a exponential relationship with 
the elements in the distance metrics. If point ij
a
 is in the 
optimal warping path, then the sub path from point 11a   to 
point ij
a
 is also a local optimal solution from which we can 
deduce that the optimal path from 11a  to  nma  can be 
gained through searching the local optimal solution from  
11a  to NMa  in an iterative way: 
??
?
????+=
=
)},1(),1,(),1,1(min{),(
)1,1( 11
jisjisjisajis
as
ij (2.1) 
ni ,...,3,2= ? mj ,...,3,2= .In the distance metrics
? the minimum accumulated value in the warping path 
is ),( nms  Then, we can get the optimal path by regressing 
from ij
a
 to the beginning point )1,1(s  according to the 
minimum accumulative values in the warping path [7][8]?
and compute the dynamic warping distance ),( YXDdtw  of 
these two pattern series. 
distance ),( YXDdtw  of the time series we can 
generalize that?(1) Dynamic warping distance can be used 
Figure 1 Dynamic warping path 
248
to calculate the distance between two time series with 
random lengths ? (2) The warping on the timeline is 
insensitive[9][10]? 
IV. THE DYNAMIC TIME WARPING ALGORITHM FOR 
SEQUENTIAL PATTERN SIMILARITIES 
We can only compute the distance between two series 
with equal length no matter using the meta pattern 
monotonous or vector distance of the sequential pattern or 
using the weighting pattern distance [11]?Dynamic time 
warding distance method can be applied in computing the 
distance between two points with different dimensions?this 
idea can be introduced in computing the distance between 
series with different length. 
The pattern series generated from 
time ),...,,( 21 nxxxX =  and ),...,,( 21 myyyY =  are : 
},...,,{ 21 tX MMMS = , },...,,{ 21 pY NNNS = ,
),( iii taM ?=  is the meta pattern of 
XS , ),( jjj taN ?=  is the meta pattern 
of YS , ),...,2,1,,...,2,1( pjti ==  
Then we can built up the distance metrics for these two 
pattern series ? ptijaDM ×= )( , ),( jiweiij NMDa =  
denotes the weighted distance between iM -the  i th meta 
pattern of pattern series XS  and jN  -the j  th meta pattern 
of pattern series: ptij
aDM ×= )( , ),( jiweiij NMDa =  
denotes the weighted distance between meta pattern iM and 
jN : The more similar meta patterns iM , jN  are? the 
closer the value of  ij
a
 is to 0?on the contrary the more 
different meta patterns iM , jN  are?the greater ija  is [11]
? 
Similar as the dynamic time warping distance of time 
series ? searching  the optimal warding 
path KwwwW ,...,, 21=  in discrete metrics 
ptijaDM ×= )(  and calculating the optimal warping path,  
this minimum is called as the dynamic warping distance 
between pattern series XS  and YS , here it is represented 
using ),( YXdtw SSD ?then we have? 
},...,,,min{),( 21
1
K
K
i
iYXdtw wwwWwSSD == ?
=
 
The dynamic warping distance of these two pattern 
series2 ),( YXdtw SSD  has the following features? 
(1)When 0),(,0 === YXdtw SSDNM ; 
(2)Wwhen ),(),(, YXweiYXdtw SSDSSDNM == ; 
    Of course ),( YXdtw SSD  is also searched in an 
iterative way? 
??
??
?
+=
|])|,2[|],|,2[(
)|],|,2[(
|])|,2[,(
min),(),( 11
YYXXdtw
YXXdtw
YYXdtw
weiYXdtw
SSSSD
SSSD
SSSD
NMDSSD
 
|])|,2[,( YYXdtw SSSD  is dynamic time warping 
distance between the first second and the last meta pattern in 
pattern series XS  and YS . 
The dynamic time warping distance of the pattern series 
can be used to compute the distant of time series with 
random length. Because the dynamic time distance of the 
pattern series has the features of positive, symmetry, and 
triangle inequation ? so it can be used to define the 
similarity of two pattern series. 
Definition4.1The pattern series generated after 
compressing the time series ),...,,( 21 nxxxX =  and 
),...,,( 21 myyyY =  are? 
},...,,{ 21 tX MMMS = , },...,,{ 21 pY NNNS =
),( YXdtw SSD  is called as the similarity function for 
pattern series XS  and YS : 
),(),( YXdtwYX SSDSSSim =  
When judging whether the two pattern series are similar
?we only need to compute their dynamic time warping 
distance .When a constant ?  is specified, if the value of 
their similarity function is below ?  ? they are similar 
otherwise they’re not similar. 
Definition4.2 Converting time series 
),...,,( 21 nxxxX =  into pattern series, the results are?
},...,,{ 21 tX MMMS =  For every sequential 
pattern XXX SSS ?21 , , },...,,{ 111 ljjjX MMMS ++=
? },...,,{ 212 liiiX MMMS ++= ? we call 
),( 21 XXdtw SSD  as the similarity function for sequential 
patterns 1XS and 2XS ? 
=),( YX SSSim ),( YXdtw SSD  
,,1 1 tlii ?+? tljj ?+? 1,1 ? 
249
V. SIMULATION EXPERIMENTS 
We use all data from Shanghai and Shenzhen 300 index 
in both the year of 2006 and 2007 as our experimental 
objects?like illustrated by figure 2and figure 3.They’re 
converted into pattern series and contain 80 and 88 meta 
patterns respectively. Their distance is computed as 28.4 
using pattern series dynamic time warping distance 
methods. Therefore the pattern series of these two time 
series are not quite similar. This is because that in 2006, the 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
Shanghai and Shenzhen index increased tardily. However 
in the 2007?nearly all stockers entered the market which 
promoted the rapid increase in the Shanghai and Shenzhen 
300 index and therefore resulted the great difference 
between 2006 and 2007. 
 
REFERENCES 
 
[1] Yingjun Wong, Zhongying Zhu. Time series 
clustering algorithms analysis based on piecewise linear 
dynamic time warping. Research and design, micro 
computer application, the 19thv volume the 9th issue, 2003. 
[2] D. J. Berndt, J. Clifford. Finding patterns in time 
series: DB, 2000.A dynamic programming approach. In 
Advances in Knowledge Discovery and Data Mining, 1996. 
[3] J. Berndt, D. & Clifford. Using dynamic time 
warping to find patterns in time series. AAAI-94 Workshop 
on Knowledge Discovery in Database, 1994, 229~248. 
[4]Wenlong Qu, Dezheng Zhang, Bingru Yang. Time 
series similarity matching based on wavelet and dynamic 
time warping, University of Science and Technology 
Beijing journal. The 28th volume, the 4th issue, April,2006. 
[5] Berndt, D. and Clifford, J. (1994).Using dynamic 
time warping tp find patterns in time series.AAAI 
Workshop on Knowledge Discovery in Databases, 
PP.229~248. 
[6] Aach,.J.& Church,G(2001).Alidning gene expression 
time series with time warping algorithms 
Bioinformatics.Vol,17. 
[7] Kim, S.W., Park, S., & Chu, W.W. (2004). Efficient 
processing of similarity search under time warping in 
sequence databases: an index-based approach. Inf. System. 
29(5): 405~420.  
[8] Das G, L in K.I, Marmila H, et al. Rule Discovery 
from Time Series [A].In Proc. of the 4th Int. Conf. on 
Knowledge Discovery and Data Mining[C]. [S. l.] : AAA I 
Press, 1998. 16~22. 
[9] Wenbao Zhang. Datamining research on time series. 
Northwestern Polytechnic University doctoral dissertation, 
March, 2002. 
[10]Liang Wang ? Lihong Jiang. Fast mining max 
frequency pattern algorithm. Computer engineering and 
application 2006.17. 
[11]Yong Zhou  Research on time series sequential 
association rules mining. Southwestern University of 
Finance and Economics doctoral dissertation,Jume.2008?
40-60. 
 
Figure2:2006 Shanghai and Shenzhen 300 index 
0
1000
2000
3000
4000
5000
6000
7000
1 51 101 151 201
figure 3 2007 Shanghai and Shenzhen 300 index 
250
